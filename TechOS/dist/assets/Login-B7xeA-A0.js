import{u as b,a as N,b as w,r as c,j as e,L as y,s as m}from"./index-BDmfLVIV.js";import{B as u}from"./button-C_eF5YE9.js";import{I as x}from"./input-DTTcDZLv.js";import{L as h}from"./label-C6-Qkfxd.js";import{C,a as L,b as I,c as E,d as G}from"./card-BjaUSfTE.js";import{G as D}from"./graduation-cap-BU25Nuyq.js";const M=()=>{const d=b(),{user:l,userRole:i,loading:p}=N(),{toast:n}=w(),[o,a]=c.useState(!1);c.useEffect(()=>{if(l){const r=i?{admin:"/admin/dashboard",teacher:"/teacher/dashboard",student:"/student/dashboard",representative:"/representative/dashboard"}[i]:"/profile";d(r,{replace:!0})}},[l,i,d]);const g=async s=>{s.preventDefault(),a(!0);const r=new FormData(s.currentTarget),j=r.get("login-email"),v=r.get("login-password");try{const{error:t}=await m.auth.signInWithPassword({email:j,password:v});if(t)throw t;n({title:"Éxito",description:"Has iniciado sesión correctamente."})}catch(t){n({title:"Fallo de inicio de sesión",description:t.message||"Email o contraseña inválidos.",variant:"destructive"})}finally{a(!1)}},f=async()=>{a(!0);try{const{error:s}=await m.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/login`}});if(s)throw s}catch(s){n({title:"Error de Google",description:s.message||"No se pudo iniciar sesión con Google.",variant:"destructive"})}finally{a(!1)}};return p?e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx("div",{children:"Cargando..."})}):e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"mb-8 flex flex-col items-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-primary",children:e.jsx(D,{className:"h-8 w-8 text-primary-foreground"})}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Academic Continuity"}),e.jsx("p",{className:"text-muted-foreground",children:"Platform for Education Management"})]}),e.jsxs(C,{children:[e.jsxs(L,{children:[e.jsx(I,{children:"Bienvenido"}),e.jsx(E,{children:"Inicia sesión en tu cuenta"})]}),e.jsxs(G,{children:[e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"login-email",children:"Email"}),e.jsx(x,{id:"login-email",name:"login-email",type:"email",placeholder:"tu@ejemplo.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"login-password",children:"Contraseña"}),e.jsx(x,{id:"login-password",name:"login-password",type:"password",placeholder:"••••••••",required:!0})]}),e.jsx(u,{type:"submit",className:"w-full",disabled:o,children:o?"Iniciando sesión...":"Iniciar Sesión"})]}),e.jsxs("div",{className:"my-4 flex items-center",children:[e.jsx("div",{className:"flex-grow border-t border-muted"}),e.jsx("span",{className:"mx-4 text-xs uppercase text-muted-foreground",children:"O"}),e.jsx("div",{className:"flex-grow border-t border-muted"})]}),e.jsxs(u,{variant:"outline",className:"w-full",onClick:f,disabled:o,children:[e.jsx("span",{className:"mr-2 h-5 w-5",children:"G"}),"Continuar con Google"]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["¿No tienes cuenta?"," ",e.jsx(y,{to:"/register",className:"text-primary hover:underline",children:"Regístrate aquí"})]})})]})]})]})})};export{M as default};
