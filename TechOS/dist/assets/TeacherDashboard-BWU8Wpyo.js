import{a as E,u as L,r as d,d as _,j as s}from"./index-BDmfLVIV.js";import{B as r}from"./button-C_eF5YE9.js";import{C as o,d as m,a as x,b as u,c as j}from"./card-BjaUSfTE.js";import{S as t}from"./skeleton-DMHS1ygH.js";import{u as B,L as O}from"./LanguageSwitcher-DNtGxllZ.js";import{U as A}from"./user-CpZ06nfE.js";import{C as U,a as $}from"./clock-BGQKv7zB.js";import{B as v}from"./book-open-DZpumAGF.js";import{P as z}from"./plus-BlqnB9nq.js";const J=()=>{const{user:c,signOut:C}=E(),n=L(),{t:f}=B(),[i,k]=d.useState([]),[S,g]=d.useState(!0),[N,p]=d.useState(null);d.useEffect(()=>{c&&y()},[c]);const y=async()=>{if(c){g(!0),p(null);try{const{data:e,error:a}=await _.from("courses").select("*, schedules(*)").eq("teacher_id",c.id);if(a)throw a;k(e||[])}catch(e){p(e.message)}finally{g(!1)}}},T=async()=>{await C(),n("/login")},w=e=>new Date(`2000-01-01T${e}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),D=()=>{const e=new Date().getDay(),a=[];return i.forEach(l=>{l.schedules.filter(h=>h.day_of_week===e).forEach(h=>{a.push({course:l,schedule:h})})}),a};if(S)return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b bg-card",children:s.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[s.jsx(t,{className:"h-8 w-48"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(t,{className:"h-10 w-20"}),s.jsx(t,{className:"h-10 w-20"})]})]})}),s.jsx("main",{className:"container mx-auto p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(t,{className:"h-32 w-full"}),s.jsx(t,{className:"h-64 w-full"})]})})]});if(N)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx(o,{className:"w-96",children:s.jsx(m,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-red-500 mb-4",children:["Error loading data: ",N]}),s.jsx(r,{onClick:y,children:"Try Again"})]})})})});const b=D();return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b bg-card",children:s.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:f("teacherDashboard")}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(O,{}),s.jsx(r,{onClick:()=>n("/profile"),variant:"ghost",size:"icon",children:s.jsx(A,{className:"h-5 w-5"})}),s.jsx(r,{onClick:T,variant:"outline",children:f("signOut")})]})]})}),s.jsxs("main",{className:"container mx-auto p-6 space-y-8",children:[s.jsxs(o,{children:[s.jsxs(x,{children:[s.jsx(u,{children:"Today's Classes"}),s.jsx(j,{children:"Your classes for today"})]}),s.jsx(m,{children:b.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(U,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No classes scheduled for today"})]}):s.jsx("div",{className:"space-y-4",children:b.map(({course:e,schedule:a},l)=>s.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-card",children:[s.jsx(v,{className:"h-5 w-5 text-primary mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-lg",children:e.name}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[s.jsx($,{className:"h-4 w-4"}),s.jsxs("span",{children:[w(a.start_time)," - ",w(a.end_time)]})]})]}),s.jsx(r,{onClick:()=>n(`/teacher/course/${e.id}`),variant:"outline",size:"sm",children:"View Details"})]},l))})})]}),s.jsxs(o,{children:[s.jsx(x,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(u,{children:"My Courses"}),s.jsxs(j,{children:[i.length," courses assigned"]})]}),s.jsxs(r,{children:[s.jsx(z,{className:"mr-2 h-4 w-4"}),"Add Course"]})]})}),s.jsx(m,{children:i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(v,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No courses assigned yet"})]}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(e=>s.jsxs(o,{className:"cursor-pointer hover:shadow-md transition-shadow",children:[s.jsxs(x,{children:[s.jsx(u,{className:"text-lg",children:e.name}),s.jsxs(j,{children:[e.schedules.length," schedule",e.schedules.length!==1?"s":""]})]}),s.jsx(m,{children:s.jsx(r,{onClick:()=>n(`/teacher/course/${e.id}`),className:"w-full",variant:"outline",children:"View Course"})})]},e.id))})})]})]})]})};export{J as default};
