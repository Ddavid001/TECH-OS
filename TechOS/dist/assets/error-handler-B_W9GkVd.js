var u=Object.defineProperty;var D=(i,e,o)=>e in i?u(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o;var O=(i,e,o)=>D(i,typeof e!="symbol"?e+"":e,o);import{s,e as l,o as t,n as R,i as L,a as N}from"./types-eghP_0fx.js";import{r as p,j as S,v as f}from"./index-BioLNpht.js";const I=s().email("Por favor, ingresa un email válido"),U=s().min(6,"La contraseña debe tener al menos 6 caracteres"),E=s().min(1,"Este campo es obligatorio").max(50,"Máximo 50 caracteres"),m=s().regex(/^\+?[\d\s-()]+$/,"Formato de teléfono inválido").optional(),T=l(["admin","teacher","student","representative"]),A=l(["school","university","institute"]);t({email:I,password:s().min(1,"La contraseña es obligatoria")});t({email:I,password:U,confirmPassword:s(),firstName:E,lastName:E,role:T,institutionId:s().uuid("ID de institución inválido")}).refine(i=>i.password===i.confirmPassword,{message:"Las contraseñas no coinciden",path:["confirmPassword"]});t({firstName:E,lastName:E,role:T,institutionId:s().uuid("ID de institución inválido")});t({name:s().min(1,"El nombre es obligatorio").max(100,"Máximo 100 caracteres"),type:A,address:s().optional(),latitude:R().min(-90).max(90).optional(),longitude:R().min(-180).max(180).optional()});t({name:s().min(1,"El nombre del curso es obligatorio").max(100,"Máximo 100 caracteres"),teacherId:s().uuid("ID de profesor inválido").optional()});t({file:L(File),maxSize:R().default(5*1024*1024),allowedTypes:N(s()).default(["image/jpeg","image/png","application/pdf"])});t({latitude:R().min(-90).max(90),longitude:R().min(-180).max(180)});const x=t({firstName:E,lastName:E,email:I,phone:m,experience:s().optional(),education:s().optional(),documents:N(s()).min(1,"Debes subir al menos un documento")}),h=t({name:s().min(1,"El nombre de la institución es obligatorio"),type:A,address:s().min(1,"La dirección es obligatoria"),contactName:E,contactEmail:I,contactPhone:m,documents:N(s()).min(1,"Debes subir al menos un documento")}),g=p.forwardRef(({className:i,...e},o)=>S.jsx("textarea",{className:f("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:o,...e}));g.displayName="Textarea";class r extends Error{constructor(o,n,_){super(n);O(this,"code");O(this,"details");this.name="AppError",this.code=o,this.details=_}}const a={AUTH_INVALID_CREDENTIALS:"AUTH_INVALID_CREDENTIALS",AUTH_USER_NOT_FOUND:"AUTH_USER_NOT_FOUND",AUTH_EMAIL_NOT_CONFIRMED:"AUTH_EMAIL_NOT_CONFIRMED",AUTH_INSUFFICIENT_PERMISSIONS:"AUTH_INSUFFICIENT_PERMISSIONS",VALIDATION_REQUIRED_FIELD:"VALIDATION_REQUIRED_FIELD",VALIDATION_INVALID_EMAIL:"VALIDATION_INVALID_EMAIL",VALIDATION_PASSWORD_TOO_SHORT:"VALIDATION_PASSWORD_TOO_SHORT",VALIDATION_PASSWORDS_DONT_MATCH:"VALIDATION_PASSWORDS_DONT_MATCH",DB_CONNECTION_ERROR:"DB_CONNECTION_ERROR",DB_QUERY_ERROR:"DB_QUERY_ERROR",DB_CONSTRAINT_VIOLATION:"DB_CONSTRAINT_VIOLATION",FILE_TOO_LARGE:"FILE_TOO_LARGE",FILE_INVALID_TYPE:"FILE_INVALID_TYPE",FILE_UPLOAD_FAILED:"FILE_UPLOAD_FAILED",NETWORK_ERROR:"NETWORK_ERROR",NETWORK_TIMEOUT:"NETWORK_TIMEOUT",UNKNOWN_ERROR:"UNKNOWN_ERROR",INTERNAL_SERVER_ERROR:"INTERNAL_SERVER_ERROR"},c={[a.AUTH_INVALID_CREDENTIALS]:"Credenciales inválidas. Verifica tu email y contraseña.",[a.AUTH_USER_NOT_FOUND]:"Usuario no encontrado.",[a.AUTH_EMAIL_NOT_CONFIRMED]:"Por favor, confirma tu email antes de iniciar sesión.",[a.AUTH_INSUFFICIENT_PERMISSIONS]:"No tienes permisos para realizar esta acción.",[a.VALIDATION_REQUIRED_FIELD]:"Este campo es obligatorio.",[a.VALIDATION_INVALID_EMAIL]:"Por favor, ingresa un email válido.",[a.VALIDATION_PASSWORD_TOO_SHORT]:"La contraseña debe tener al menos 6 caracteres.",[a.VALIDATION_PASSWORDS_DONT_MATCH]:"Las contraseñas no coinciden.",[a.DB_CONNECTION_ERROR]:"Error de conexión con la base de datos.",[a.DB_QUERY_ERROR]:"Error al consultar la base de datos.",[a.DB_CONSTRAINT_VIOLATION]:"Los datos ingresados no son válidos.",[a.FILE_TOO_LARGE]:"El archivo es demasiado grande.",[a.FILE_INVALID_TYPE]:"Tipo de archivo no válido.",[a.FILE_UPLOAD_FAILED]:"Error al subir el archivo.",[a.NETWORK_ERROR]:"Error de conexión. Verifica tu internet.",[a.NETWORK_TIMEOUT]:"La solicitud tardó demasiado tiempo.",[a.UNKNOWN_ERROR]:"Ha ocurrido un error inesperado.",[a.INTERNAL_SERVER_ERROR]:"Error interno del servidor."};class d{static fromSupabaseError(e){const o=e.code||a.UNKNOWN_ERROR,n=e.message||c[o]||c[a.UNKNOWN_ERROR];return new r(o,n,e.details)}static fromNetworkError(e){return e.name==="AbortError"?new r(a.NETWORK_TIMEOUT,c[a.NETWORK_TIMEOUT]):new r(a.NETWORK_ERROR,c[a.NETWORK_ERROR],e)}static fromValidationError(e,o){return new r(a.VALIDATION_REQUIRED_FIELD,`${e}: ${o}`)}static getUserMessage(e){return c[e.code]||e.message}static logError(e,o){console.error(`[${o||"App"}] Error:`,{code:e.code,message:e.message,details:e.details,stack:e.stack})}}const M=()=>({handleError:(e,o)=>{var _;let n;return e instanceof r?n=e:e!=null&&e.code&&(e!=null&&e.message)?n=d.fromSupabaseError(e):(e==null?void 0:e.name)==="AbortError"||(_=e==null?void 0:e.message)!=null&&_.includes("fetch")?n=d.fromNetworkError(e):n=new r(a.UNKNOWN_ERROR,(e==null?void 0:e.message)||"Error desconocido"),d.logError(n,o),n}});export{g as T,h as i,x as t,M as u};
