import{a as q,u as z,b as _,r as a,w as N,j as e,s as I}from"./index-Craug-YI.js";import{B as l}from"./button-D5YUjWo4.js";import{C as g,a as y,b as C,c as b,d as S}from"./card-cHz5kV7I.js";import{I as n}from"./input-Be_K3n5P.js";import{L as d}from"./label-BkJx8-4K.js";import{A as D}from"./arrow-left-6NE5Qxv-.js";import{U as k}from"./user-CnEKsD7I.js";const O=()=>{const{user:t}=q(),E=z(),{toast:i}=_(),[c,u]=a.useState(""),[m,f]=a.useState(""),[B,U]=a.useState(""),[o,h]=a.useState(""),[p,x]=a.useState(""),[w,j]=a.useState(!1),[v,P]=a.useState(!1);a.useEffect(()=>{t&&A()},[t]);const A=async()=>{if(t)try{const{data:s,error:r}=await N.from("profiles").select("first_name, last_name").eq("id",t.id).single();if(r)throw r;u(s.first_name||""),f(s.last_name||"")}catch(s){console.error("Error fetching profile:",s)}},F=async s=>{if(s.preventDefault(),!!t){j(!0);try{const{error:r}=await N.from("profiles").update({first_name:c,last_name:m}).eq("id",t.id);if(r)throw r;i({title:"Success",description:"Profile updated successfully"})}catch(r){console.error("Error updating profile:",r),i({title:"Error",description:"Failed to update profile",variant:"destructive"})}finally{j(!1)}}},L=async s=>{if(s.preventDefault(),o!==p){i({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(o.length<6){i({title:"Error",description:"Password must be at least 6 characters",variant:"destructive"});return}P(!0);try{const{error:r}=await I.auth.updateUser({password:o});if(r)throw r;i({title:"Success",description:"Password updated successfully"}),U(""),h(""),x("")}catch(r){console.error("Error updating password:",r),i({title:"Error",description:"Failed to update password",variant:"destructive"})}finally{P(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b bg-card",children:e.jsx("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>E(-1),children:e.jsx(D,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Profile / Perfil"})]})})}),e.jsx("main",{className:"container mx-auto p-6 max-w-2xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx(C,{children:"Personal Information / Información Personal"}),e.jsx(b,{children:"Update your profile details / Actualiza tus datos"})]})]})}),e.jsx(S,{children:e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"firstName",children:"First Name / Nombre"}),e.jsx(n,{id:"firstName",value:c,onChange:s=>u(s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"lastName",children:"Last Name / Apellido"}),e.jsx(n,{id:"lastName",value:m,onChange:s=>f(s.target.value),required:!0})]}),e.jsx(l,{type:"submit",disabled:w,children:w?"Updating... / Actualizando...":"Update Profile / Actualizar Perfil"})]})})]}),e.jsxs(g,{children:[e.jsxs(y,{children:[e.jsx(C,{children:"Change Password / Cambiar Contraseña"}),e.jsx(b,{children:"Update your password / Actualiza tu contraseña"})]}),e.jsx(S,{children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"newPassword",children:"New Password / Nueva Contraseña"}),e.jsx(n,{id:"newPassword",type:"password",value:o,onChange:s=>h(s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"confirmPassword",children:"Confirm Password / Confirmar Contraseña"}),e.jsx(n,{id:"confirmPassword",type:"password",value:p,onChange:s=>x(s.target.value),required:!0})]}),e.jsx(l,{type:"submit",disabled:v,children:v?"Updating... / Actualizando...":"Change Password / Cambiar Contraseña"})]})})]})]})})]})};export{O as default};
